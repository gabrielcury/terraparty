<div class="container padding-top-120">
  <h4>We are going to create <i>main.tf.json.</i> This is the only file you need in a folder to run preinstalled
    Terraform.</h4>
  <br />
  <div class="row">
    <div class="col-lg-6">
      <div class="form-group">
        <label for="variableModelname">Variable name: </label>
        <input class="form-control form-control-sm" id="variableModelname" [(ngModel)]="variableModel.name" />
        <label for="variableModelValue">Variable value: </label>
        <input class="form-control form-control-sm" id="variableModelValue" [(ngModel)]="variableModel.value" />
        <br />
        <button class="btn btn-primary" (click)="addVariable()">Add variable</button>
        <br />
        <!-- <br /> -->
      </div>
      <div class="form-group">

        <label for="resourceType">Resource type: </label>
        <select class="form-control form-control-sm" id="resourceType" [(ngModel)]="resourceModel.selectedIndex"
          #resourceType>
          <option *ngFor="let typeSelection of resourceTypesMeta; index as i; trackBy: id;" [value]="i">
            {{typeSelection.type}}
          </option>
        </select>
        <!-- {{resourceTypesMeta | json}} -->
        <div>

          <!-- {{resourceModel | json}} -->
          <div *ngIf="resourceModel.selectedIndex">
            <div *ngIf="resourceTypesMeta[resourceModel.selectedIndex].docsUrl">
              <a [href]="resourceTypesMeta[resourceModel.selectedIndex].docsUrl" target="_blank">Documentation link</a>
            </div>
            <label for="resourceModelName">Resource id (you name it): </label>
            <input class="form-control form-control-sm" id="resourceModelName" [(ngModel)]="resourceModel.name" />
            <ul>
              <li
                *ngFor="let resourcePropertyMeta of resourceTypesMeta[resourceModel.selectedIndex].properties; index as resourcePropertyIndex;">
                {{resourcePropertyMeta.name}} ({{resourcePropertyMeta.required ? 'Required' : 'Optional'}}): <input
                  class="form-control form-control-sm" [(ngModel)]="resourceModel.properties[resourcePropertyIndex]" />
              </li>
            </ul>
          </div>
        </div>
        <div>
          <br />
          <!-- TODO: specify variables and other resources -->
          <button class="btn btn-primary" (click)="addResource()">Add resource</button>&nbsp;
          <button class="btn btn-info" (click)="exportTF()">Export </button>
          <hr>
          <h3>Your Terraform model: </h3>
          <ul>
            Variables:
            <li *ngFor="let variable of terraformTFVars">
              Variable name: {{variable.name}}
              <br />

              <span><label for="variableValueDisplay">Variable name: </label> <input
                  class="form-control form-control-sm" id="variableValueDisplay" [(ngModel)]="variable.value" /></span>
            </li>
            {{terraformTFVars.length < 1 ? 'none': '' }}
          </ul>


          <ul>
            Resources:
            <li *ngFor="let resource of mainTF">
              <!-- {{resource | json}} -->
              Resource type: {{resource.type}}
              <br />
              Resource name: {{resource.name}}
              <!-- TODO: list all properties -->
              <div>
                <ul>
                  <li *ngFor="let resourceProp of resource.properties">
                    <span><label for="resourceProperty">{{resourceProp.name}}
                        ({{resourceProp.required ? 'Required' : 'Optional'}}): </label>
                      <input class="form-control form-control-sm" id="resourceProperty"
                        [(ngModel)]="resourceProp.value" /></span>
                  </li>
                </ul>
              </div>
            </li>
            {{mainTF.length < 1 ? 'none': '' }}
          </ul>
        </div>
      </div>
    </div>
    <div class="offset-lg-2 col-lg-4">
      <div *ngIf="showOutput">
        TF output:
        <br />
        <code>{{output | json}}</code>
      </div>
      <div *ngIf="!showOutput">
        <code>Exported code will go here.</code>
      </div>
    </div>
  </div>